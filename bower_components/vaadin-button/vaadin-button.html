<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
--><link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../vaadin-themable-mixin/vaadin-themable-mixin.html">
<link rel="import" href="../vaadin-control-state-mixin/vaadin-control-state-mixin.html">

<dom-module id="vaadin-button-default-theme">
  <template>
    <style>
      /* TODO: Implement default theme. */
    </style>
  </template>
</dom-module>

<dom-module id="vaadin-button">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        outline: none;
      }

      [part="button"] {
        width: 100%;
        height: 100%;
        margin: 0; /* (normalize.css) Remove the margin in Firefox and Safari. */
        overflow: visible; /* (normalize.css) Show the overflow in IE. */
      }
    </style>
    <button id="button" type="button" part="button">
      <slot></slot>
    </button>
  </template>
  <script>
if (!Polymer.Element) {
  throw new Error('Unexpected Polymer version ' + Polymer.version + ' is used, expected v2.0.0 or later.');
}

{
  /**
   * `<vaadin-button>` is a Polymer 2 element providing an accessible and customizable button.
   *
   * ```html
   * <vaadin-button>
   * </vaadin-button>
   * ```
   *
   * ### Styling
   *
   * The following shadow DOM parts are exposed for styling:
   *
   * Part name | Description
   * ----------------|----------------
   * `button` | The internal `<button>` element
   *
   * The following attributes are exposed for styling:
   *
   * Attribute | Description
   * --------- | -----------
   * `active` | Set when the button is pressed down, either with mouse, touch or the keyboard.
   * `disabled` | Set when the button is disabled.
   * `focus-ring` | Set when the button is focused using the keyboard.
   * `focused` | Set when the button is focused.
   *
   * @memberof Vaadin
   * @mixes Vaadin.ControlStateMixin
   * @mixes Vaadin.ThemableMixin
   * @mixes Polymer.GestureEventListeners
   * @demo demo/index.html
   */
  var ButtonElement = function (_Vaadin$ControlStateM) {
    babelHelpers.inherits(ButtonElement, _Vaadin$ControlStateM);

    function ButtonElement() {
      babelHelpers.classCallCheck(this, ButtonElement);
      return babelHelpers.possibleConstructorReturn(this, (ButtonElement.__proto__ || Object.getPrototypeOf(ButtonElement)).apply(this, arguments));
    }

    babelHelpers.createClass(ButtonElement, [{
      key: 'ready',
      value: function ready() {
        babelHelpers.get(ButtonElement.prototype.__proto__ || Object.getPrototypeOf(ButtonElement.prototype), 'ready', this).call(this);

        // Leaving default role in the native button, makes navigation announcement
        // being different when using focus navigation (tab) versus using normal
        // navigation (arrows). The first way announces the label on a button
        // since the focus is moved programmatically, and the second on a group.
        this.setAttribute('role', 'button');
        this.$.button.setAttribute('role', 'presentation');

        this._addActiveListeners();
      }
    }, {
      key: '_addActiveListeners',
      value: function _addActiveListeners() {
        var _this2 = this;

        Polymer.Gestures.addListener(this, 'down', function () {
          return !_this2.disabled && _this2.setAttribute('active', '');
        });
        Polymer.Gestures.addListener(this, 'up', function () {
          return _this2.removeAttribute('active');
        });
        this.addEventListener('keydown', function (e) {
          return !_this2.disabled && [13, 32].indexOf(e.keyCode) >= 0 && _this2.setAttribute('active', '');
        });
        this.addEventListener('keyup', function () {
          return _this2.removeAttribute('active');
        });
      }
    }, {
      key: 'focusElement',
      get: function get() {
        return this.$.button;
      }
    }], [{
      key: 'is',
      get: function get() {
        return 'vaadin-button';
      }
    }]);
    return ButtonElement;
  }(Vaadin.ControlStateMixin(Vaadin.ThemableMixin(Polymer.GestureEventListeners(Polymer.Element))));

  customElements.define(ButtonElement.is, ButtonElement);

  /**
   * @namespace Vaadin
   */
  window.Vaadin = window.Vaadin || {};
  Vaadin.ButtonElement = ButtonElement;
}</script>
</dom-module>
